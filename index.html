<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>iOS Webarchive Decoder</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="./script.js">
</head>
<body>
  <form id="form" name="form">
    <label for="webarchive-file">iOS Webarchive File:</label> <input type="file" id="webarchive-file" accept=".webarchive"> <button type="submit" class="button">Decode</button>
  </form>
  <div id="result">
    <div id="text-viewer"></div><button id="copy-button">Copy to Clipboard</button> <button id="download-button">Download Decoded File</button>
  </div>
  <script type="module">
  "use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,c){try{var a=t[o](c),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}document.addEventListener("DOMContentLoaded",function(){function e(e){var n=document.createElement("textarea");return n.innerHTML=e,t(n.value)}function t(e){return e.replace(/\\u([a-fA-F0-9]{4})/g,function(e,t){return String.fromCharCode(parseInt(t,16))})}var n=document.getElementById("form"),r=(document.getElementById("result"),document.getElementById("text-viewer")),o=document.getElementById("copy-button"),c=document.getElementById("download-button");n.addEventListener("submit",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,i,d,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(a=document.getElementById("webarchive-file").files[0])){t.next=18;break}return t.prev=3,t.next=6,a.arrayBuffer();case 6:i=t.sent,d=new TextDecoder("utf-8"),u=d.decode(i).match(/<html[^>]*>[\s\S]*?<\/html>/i),u?(l=e(u[0]),r.textContent=l,o.disabled=!1,c.disabled=!1):alert("Invalid iOS webarchive file. No HTML content found."),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),console.error("An error occurred:",t.t0),alert("An error occurred while decoding the iOS webarchive file.");case 16:t.next=19;break;case 18:alert("Please select an iOS webarchive file.");case 19:case"end":return t.stop()}},t,void 0,[[3,12]])}));return function(e){return t.apply(this,arguments)}}()),o.addEventListener("click",function(){var e=r.textContent;navigator.clipboard.writeText(e).then(function(){return alert("Text copied to clipboard")}).catch(function(e){return console.error("Error copying text:",e)})}),c.addEventListener("click",function(){var e=r.textContent,t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="decoded_text.txt",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)})});
  </script>
</body>
</html>